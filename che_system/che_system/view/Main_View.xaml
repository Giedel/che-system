<!-- Main_View.xaml -->
    
    <Window x:Class="che_system.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:che_system.view"
        xmlns:VModel="clr-namespace:che_system.view_model"
        xmlns:icon="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        xmlns:converters="clr-namespace:che_system.converters"
        mc:Ignorable="d"
        Title="MainWindow" Height="700" Width="1100"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip"
        AllowsTransparency="True"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">

    <Window.DataContext>
        <VModel:Main_View_Model />
    </Window.DataContext>

    <Window.Resources>
        <converters:Boolean_To_Visibility_Converter x:Key="BoolToVisibilityConverter"/>
        <DataTemplate DataType="{x:Type VModel:Dashboard_View_Model}">
            <local:Dashboard_View/>
        </DataTemplate>
        
        <DataTemplate DataType="{x:Type VModel:Inventory_View_Model}">
            <local:Inventory_View/>
        </DataTemplate>
        
        <DataTemplate DataType="{x:Type VModel:Borrowing_View_Model}">
            <local:Borrowing_View/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type VModel:Return_Damages_View_Model}">
            <local:Return_Damages_View/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type VModel:Reports_View_Model}">
            <local:Reports_View/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type VModel:User_Management_View_Model}">
            <local:User_Management_View/>
        </DataTemplate>
    </Window.Resources>

    <Border 
                CornerRadius="10"
                BorderThickness="2"
                BorderBrush="{StaticResource BorderGradient}">

        <Grid>
            <Grid.ColumnDefinitions>
                <!-- Side Bar -->
                <ColumnDefinition Width="320"/>
                <!-- Content Section -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Border CornerRadius="10,0,0,10"
                    Background="{StaticResource BackgroundGradientLight}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <!-- Side Bar -->
                            <StackPanel Background="Transparent">

                                <!-- Logo -->
                                <StackPanel Orientation="Horizontal"
                                            Height="Auto"
                                            Margin="20,25,0,40"
                                            Background="Transparent"
                                            HorizontalAlignment="Left">
                                    <Image Height="50" Width="50" Source="/assets/University_of_Mindanao_Logo.png" />
                                    <TextBlock VerticalAlignment="Bottom" Text="ChemLab" FontSize="40" FontWeight="Bold" Foreground="{StaticResource FontPrimary}" Margin="20 10 0 0"/>

                                </StackPanel>
                                <!-- Navigation Buttons -->
                                <!-- Dashboard (Visible to both) -->
                                <RadioButton Style="{StaticResource Nav_Button}"
             IsChecked="True"
             Command="{Binding Show_Dashboard_View_Command}">
                                    <StackPanel Orientation="Horizontal">
                                        <icon:IconImage Icon="Home" Style="{StaticResource Nav_Button_Icon}" />
                                        <TextBlock Text="Dashboard" Style="{StaticResource Nav_Button_Text}"/>
                                    </StackPanel>
                                </RadioButton>

                                <!-- Inventory (Visible to STA & Custodian) -->
                                <RadioButton Style="{StaticResource Nav_Button}"
             Command="{Binding Show_Inventory_View_Command}">
                                    <StackPanel Orientation="Horizontal">
                                        <icon:IconImage Icon="BoxesPacking" Style="{StaticResource Nav_Button_Icon}" />
                                        <TextBlock Text="Inventory" Style="{StaticResource Nav_Button_Text}"/>
                                    </StackPanel>
                                </RadioButton>

                                <!-- Borrowing (STA only) -->
                                <RadioButton Style="{StaticResource Nav_Button}"
             Command="{Binding Show_Borrowing_View_Command}">
                                    <StackPanel Orientation="Horizontal">
                                        <icon:IconImage Icon="HandHoldingHand" Style="{StaticResource Nav_Button_Icon}" />
                                        <TextBlock Text="Borrowing" Style="{StaticResource Nav_Button_Text}"/>
                                    </StackPanel>
                                </RadioButton>

                                <!-- Return & Damages (Visible to both) -->
                                <RadioButton Style="{StaticResource Nav_Button}"
             Command="{Binding Show_Return_Damages_View_Command}">
                                    <StackPanel Orientation="Horizontal">
                                        <icon:IconImage Icon="HeartBroken" Style="{StaticResource Nav_Button_Icon}" />
                                        <TextBlock Text="Return &amp; Damages" Style="{StaticResource Nav_Button_Text}"/>
                                    </StackPanel>
                                </RadioButton>

                                <!-- Reports (Custodian only) -->
                                <RadioButton Style="{StaticResource Nav_Button}"
             Command="{Binding Show_Reports_View_Command}"
                                             Visibility="{Binding IsCustodian, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <StackPanel Orientation="Horizontal">
                                        <icon:IconImage Icon="ChartPie" Style="{StaticResource Nav_Button_Icon}" />
                                        <TextBlock Text="Reports" Style="{StaticResource Nav_Button_Text}"/>
                                    </StackPanel>
                                </RadioButton>

                                <!-- User Management (Custodian only) -->
                                <RadioButton Style="{StaticResource Nav_Button}"
             Command="{Binding Show_User_Management_View_Command}"
                                             Visibility="{Binding IsCustodian, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <StackPanel Orientation="Horizontal">
                                        <icon:IconImage Icon="UserGroup" Style="{StaticResource Nav_Button_Icon}" />
                                        <TextBlock Text="User Management" Style="{StaticResource Nav_Button_Text}"/>
                                    </StackPanel>
                                </RadioButton>
                            </StackPanel>
                        </Grid>

                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0" Style="{StaticResource Logout_Button}" Height="40" Margin="10" Command="{Binding Logout_Command}">
                                <TextBlock Text="Logout" HorizontalAlignment="Center" Foreground="{StaticResource FontPrimary}"/>
                            </Button>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>

            <Grid Grid.Column="1">
                <!-- Main Section -->
                <Border CornerRadius="0,10,10,0"
                    Background="{StaticResource BackgroundGradientMidDark}">

                    <Grid>
                        <Grid.RowDefinitions>
                            <!-- Control Bar -->
                            <RowDefinition Height="40"/>
                            <!-- Header/Caption -->
                            <RowDefinition Height="50"/>
                            <!-- Content / Child View -->
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Control Bar -->
                        <StackPanel x:Name="Control_Bar_Panel"
                                Orientation="Horizontal"
                                FlowDirection="RightToLeft"
                                Background="Transparent"
                                Margin="2"
                                MouseLeftButtonDown="Control_Bar_Panel_MouseLeftButtonDown"
                                MouseEnter="Control_Bar_Panel_MouseEnter">
                            <Button x:Name="Close_Button"
                                Style="{StaticResource Control_Button}"
                                Tag="{StaticResource DarkRedDarker}"
                                Click="Close_Button_Click">
                                <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8BB;" FontSize="10"/>

                            </Button>

                            <Button x:Name="Maximize_Button"
                                Style="{StaticResource Control_Button}"
                                Tag="{StaticResource DarkRedDarker}"
                                Click="Maximize_Button_Click">
                                <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE922;" FontSize="10"/>

                            </Button>

                            <Button x:Name="Minimize_Button"
                                Style="{StaticResource Control_Button}"
                                Tag="{StaticResource DarkRedDarker}"
                                Click="Minimize_Button_Click">
                                <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE921;" FontSize="10"/>
                            </Button>
                        </StackPanel>

                        <!-- Header/Caption -->
                        <Grid Grid.Row="1"
                              Margin="0" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width=".4*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Caption -->
                            <Grid Grid.Column="0"
                                  VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Orientation="Horizontal">
                                    <icon:IconImage Icon="{Binding Icon}"
                                                    Height="45"
                                                    Width="45"
                                                    Margin="35,0,10,8"
                                                    Foreground="{StaticResource FontPrimary}"/>

                                    <TextBlock Text="{Binding Caption}"
                                               Foreground="{StaticResource FontPrimary}"
                                               FontSize="40"
                                               FontFamily="{StaticResource Inter}"
                                               FontWeight="Bold"
                                               VerticalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2"
                                            Orientation="Horizontal"
                                            VerticalAlignment="Center"
                                            Visibility="{Binding IsDashboardActive, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <TextBlock Text="From:"
                                               FontSize="20"
                                               Foreground="{StaticResource FontPrimary}"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,0"/>

                                    <!-- FROM YEAR -->
                                    <ComboBox ItemsSource="{Binding Current_Child_View.AvailableYears}"
                                              SelectedItem="{Binding Current_Child_View.SelectedFromYear}"
                                              Width="Auto"
                                              Margin="5,0,10,0"
                                              Padding="10"
                                              FontSize="20"
                                              Background="Transparent"
                                              Foreground="{StaticResource FontPrimary}"
                                              BorderThickness="0"
                                              FontWeight="SemiBold"/>

                                    <TextBlock Text="To:"
                                               FontSize="20"
                                               Foreground="{StaticResource FontPrimary}"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,0"/>

                                    <!-- TO YEAR -->
                                    <ComboBox ItemsSource="{Binding Current_Child_View.AvailableYears}"
                                              SelectedItem="{Binding Current_Child_View.SelectedToYear}"
                                              Width="Auto"
                                              Margin="5,0,0,0"
                                              Padding="10"
                                              FontSize="20"
                                              Background="Transparent"
                                              Foreground="{StaticResource FontPrimary}"
                                              BorderThickness="0"
                                              FontWeight="SemiBold"/>
                                </StackPanel>

                            </Grid>
                        </Grid>

                        <!-- Content / Child View -->
                        <ContentControl Content="{Binding Current_Child_View}"
                                        Grid.Row="2"
                                        Margin="5"/>

                    </Grid>

                </Border>
            </Grid>
        </Grid>
    </Border>

</Window>
